!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardFavIcon.addEventListener("click",(()=>{this._handleFavIcon()})),this._cardDelIcon.addEventListener("click",(()=>{this._handleDelIcon()})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleFavIcon(){this._cardFavIcon.classList.toggle("card__favorite-button_pressed")}_handleDelIcon(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageEl=this._cardElement.querySelector("#card-image"),this._cardTitleEl=this._cardElement.querySelector("#card-name"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._cardFavIcon=this._cardElement.querySelector(".card__favorite-button"),this._cardDelIcon=this._cardElement.querySelector(".card__delete-button"),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputEls=this._form.querySelectorAll(this._inputSelector),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return Array.from(this._inputEls).some((e=>!e.validity.valid))}_disableButton(){this._submitButton&&(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_enableButton(){this._submitButton&&(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}disableSubmitButton(){this._disableButton()}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputEls.forEach((e=>{this._checkInputValidity(e)}))}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target===this._popupElement||e.target.classList.contains("modal__close-button"))&&this.close()}))}}class i extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputValues=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=t}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._inputValues.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}const n={inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__error",errorClass:"modal__error_visible"},r=document.querySelector("#profile-edit-btn"),o=document.querySelector("#profile-name-input"),l=document.querySelector("#profile-description-input"),a=document.querySelector("#profile-add-btn"),c=(document.querySelector(".cards__list"),document.forms["profile-edit-form"]),d=document.forms["profile-add-form"],u=document.querySelector("#profile-name"),_=document.querySelector("#profile-description"),p=new t(n,c),h=new t(n,d);p.enableValidation(),h.enableValidation(),a.addEventListener("click",(()=>{m.open()}));const m=new i("#profile-add-modal",(function(e){b.addItem(S({name:e.title,link:e.url})),h.disableSubmitButton(),m.close()}));m.setEventListeners();const E=new i("#profile-edit-modal",(function(){u.textContent=o.value,_.textContent=l.value,p.disableSubmitButton(),E.close()}));E.setEventListeners();const v=new class{constructor(e){let{profileNameSelector:t,profileDescriptionSelector:s}=e;this._nameEl=document.querySelector(t),this._descriptionEl=document.querySelector(s)}getUserInfo(){return{name:this._nameEl.textContent,description:this._descriptionEl.textContent}}setUserInfo(e,t){this._nameEl.textContent=e,this._descriptionEl.textContent=t}}({profileNameSelector:"#profile-name",profileDescriptionSelector:"#profile-description"});r.addEventListener("click",(()=>{const{name:e,description:t}=v.getUserInfo();o.value=e,l.value=t,p.resetValidation(),E.open()}));const b=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Church window",link:"https://i.pinimg.com/originals/7a/89/e4/7a89e4ded58bb865c17d03a4bb0c6a14.png"},{name:"Lost in the Wild",link:"https://i.pinimg.com/originals/4d/7c/ac/4d7cacba2ab863cc401f5c91d656999c.png"},{name:"Light in the night",link:"https://i.pinimg.com/originals/08/ab/e5/08abe5b23ea161c330f040785ee21f3f.png"},{name:"Construction grid",link:"https://i.pinimg.com/originals/dc/14/be/dc14be6b5cf38d516aa0740653fcbcb6.png"},{name:"Stairs",link:"https://i.pinimg.com/originals/04/59/24/045924c2685a15901f44dcc559942afd.png"},{name:"Architecture geometry",link:"https://i.pinimg.com/originals/24/ae/fe/24aefe8f2484c22d981e0558727b0652.png"}],renderer:e=>{b.addItem(S(e))}},".cards__list");b.renderItems();const f=new class extends s{constructor(e){super({popupSelector:e}),this._popupImage=this._popupElement.querySelector(".modal__image-preview"),this._popupName=this._popupElement.querySelector(".modal__name-preview")}open(e,t){this._popupImage.src=e,this._popupImage.alt=t,this._popupName.textContent=t,super.open()}}("#card-preview-modal");function S(t){return new e(t,"#card-template",(()=>{f.open(t.link,t.name)})).getView()}f.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLa0ksV0FBV3hHLFlBQWN4QixFQUM5QmlGLE1BQU1ULE1BQ1IsR0gyRHdDLHVCQW1CMUMsU0FBU2dDLEVBQVc3RyxHQUlsQixPQUhlLElBQUlGLEVBQUtFLEVBQVUsa0JBQWtCLEtBQ2xEbUksRUFBZXRELEtBQUs3RSxFQUFTTyxLQUFNUCxFQUFTSyxLQUFLLElBRXJDZ0IsU0FDaEIsQ0F2QkE4RyxFQUFlbEQsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGNhcmREYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRGYXZJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZhdkljb24oKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZERlbEljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsSWNvbigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUZhdkljb24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRmF2SWNvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fZmF2b3JpdGUtYnV0dG9uX3ByZXNzZWRcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsSWNvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLW5hbWVcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRGYXZJY29uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fZmF2b3JpdGUtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9jYXJkRGVsSWNvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCNgICsgaW5wdXRFbC5pZCArIGAtZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgI2AgKyBpbnB1dEVsLmlkICsgYC1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuX2lucHV0RWxzKS5zb21lKFxyXG4gICAgICAoaW5wdXRFbCkgPT4gIWlucHV0RWwudmFsaWRpdHkudmFsaWRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLl9zdWJtaXRCdXR0b24pIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgaWYgKHRoaXMuX3N1Ym1pdEJ1dHRvbikge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCB8fFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0VmFsdWVzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgLy9jb2xsZWN0cyBkYXRhIGZyb20gaW5wdXQgZmllbGRzXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRWYWx1ZXMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybURhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgLy9yZXR1cm5zIGRhdGEgYXMgb2JqZWN0XHJcbiAgICByZXR1cm4gZm9ybURhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAvL2FkZCBzdWJtaXQgRXZlbnRMaXN0ZW5lclxyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJDaHVyY2ggd2luZG93XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tL29yaWdpbmFscy83YS84OS9lNC83YTg5ZTRkZWQ1OGJiODY1YzE3ZDAzYTRiYjBjNmExNC5wbmdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTG9zdCBpbiB0aGUgV2lsZFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS9vcmlnaW5hbHMvNGQvN2MvYWMvNGQ3Y2FjYmEyYWI4NjNjYzQwMWY1YzkxZDY1Njk5OWMucG5nXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxpZ2h0IGluIHRoZSBuaWdodFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS9vcmlnaW5hbHMvMDgvYWIvZTUvMDhhYmU1YjIzZWExNjFjMzMwZjA0MDc4NWVlMjFmM2YucG5nXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkNvbnN0cnVjdGlvbiBncmlkXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tL29yaWdpbmFscy9kYy8xNC9iZS9kYzE0YmU2YjVjZjM4ZDUxNmFhMDc0MDY1M2ZjYmNiNi5wbmdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiU3RhaXJzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaS5waW5pbWcuY29tL29yaWdpbmFscy8wNC81OS8yNC8wNDU5MjRjMjY4NWExNTkwMWY0NGRjYzU1OTk0MmFmZC5wbmdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkFyY2hpdGVjdHVyZSBnZW9tZXRyeVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2kucGluaW1nLmNvbS9vcmlnaW5hbHMvMjQvYWUvZmUvMjRhZWZlOGYyNDg0YzIyZDk4MWUwNTU4NzI3YjA2NTIucG5nXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnRuXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ0blwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHtcclxuICBwcm9maWxlRWRpdEJ0bixcclxuICBwcm9maWxlTmFtZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIGNhcmRBZGRCdG4sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbi8vIEVsZW1lbnRzXHJcblxyXG5jb25zdCBlZGl0Rm9ybUVsID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWVkaXQtZm9ybVwiXTtcclxuY29uc3QgYWRkRm9ybUVsID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWFkZC1mb3JtXCJdO1xyXG5cclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIpO1xyXG5cclxuLy8gVmFyaWFibGVzXHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBlZGl0Rm9ybUVsKTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhZGRGb3JtRWwpO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNhcmRBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIsXHJcbiAgaGFuZGxlQWRkQ2FyZFN1Ym1pdFxyXG4pO1xyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxyXG4pO1xyXG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgcHJvZmlsZU5hbWVTZWxlY3RvcjogXCIjcHJvZmlsZS1uYW1lXCIsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIixcclxufSk7XHJcblxyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBkZXNjcmlwdGlvbjtcclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkRGF0YSkpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNjYXJkLXByZXZpZXctbW9kYWxcIik7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBGdW5jdGlvbnNcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoZm9ybURhdGEpIHtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoeyBuYW1lOiBmb3JtRGF0YS50aXRsZSwgbGluazogZm9ybURhdGEudXJsIH0pKTtcclxuICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoKSB7XHJcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBwcm9maWxlTmFtZUlucHV0LnZhbHVlO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuXHJcbiAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgKCkgPT4ge1xyXG4gICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihjYXJkRGF0YS5saW5rLCBjYXJkRGF0YS5uYW1lKTtcclxuICB9KTtcclxuICByZXR1cm4gY2FyZEVsLmdldFZpZXcoKTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZVNlbGVjdG9yLCBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIC8vIHJldHVybnMgb2JqZWN0IHdpdGggdXNlciBpbmZvXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWwudGV4dENvbnRlbnQsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIC8vYWRkcyBkYXRhIHRvIHRoZSBwYWdlIGFmdGVyIHByb2ZpbGVGb3JtIHN1Ym1pdFxyXG4gICAgdGhpcy5fbmFtZUVsLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoZGF0YSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihkYXRhKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtcHJldmlld1wiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fcG9wdXBOYW1lID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX25hbWUtcHJldmlld1wiKTtcclxuICB9XHJcbiAgb3BlbihsaW5rLCBuYW1lKSB7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cE5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkRmF2SWNvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRmF2SWNvbiIsIl9jYXJkRGVsSWNvbiIsIl9oYW5kbGVEZWxJY29uIiwiX2NhcmRJbWFnZUVsIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiZ2V0VmlldyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlRWwiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJBcnJheSIsImZyb20iLCJzb21lIiwiX2Rpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRWYWx1ZXMiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybURhdGEiLCJpbnB1dCIsInZhbHVlIiwicHJvZmlsZUVkaXRCdG4iLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJjYXJkQWRkQnRuIiwiZWRpdEZvcm1FbCIsImZvcm1zIiwiYWRkRm9ybUVsIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJuZXdDYXJkUG9wdXAiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwidGl0bGUiLCJ1cmwiLCJwcm9maWxlRWRpdFBvcHVwIiwidXNlckluZm8iLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJfbmFtZUVsIiwiX2Rlc2NyaXB0aW9uRWwiLCJnZXRVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJkYXRhIiwiZWxlbWVudCIsInByZXBlbmQiLCJwb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=